<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeMaster || Typing Speed Test</title>
    <!-- Firebase App and Auth SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  </head>
  <body>
    <div class="topographic-bg"></div>
    <div id="confetti-canvas"></div>

    <!-- Notification System -->
    <div class="modal-overlay" id="notification-modal">
      <div class="modal">
        <div class="modal-body">
          <p id="notification-message"></p>
        </div>
        <div class="modal-footer">
          <button id="close-notification" tabindex="-1">OK</button>
        </div>
      </div>
    </div>

    <div class="container">
      <header>
        <h1>TypeMaster</h1>
        <div class="controls">
          <div class="user-status" id="user-status">
            <div class="user-avatar" id="user-avatar">?</div>
            <span class="user-name" id="user-name-display">Guest</span>
            <button id="login-btn" tabindex="-1">Login</button>
            <button
              id="logout-btn"
              style="display: none; width: 150px"
              tabindex="-1"
            >
              Logout
            </button>
          </div>
          <button class="theme-toggle" id="theme-toggle" tabindex="-1">
            ðŸŒ™
          </button>
        </div>
      </header>

      <div class="settings-panel">
        <div class="game-mode-selector">
          <div class="game-mode-btn active" data-mode="timed" tabindex="-1">
            Timed Test
          </div>
          <div class="game-mode-btn" data-mode="survival" tabindex="-1">
            Survival Mode
          </div>
        </div>

        <div class="mode-settings active" id="timed-settings">
          <div class="settings-grid">
            <div class="setting-group">
              <label for="time-select">Test Duration</label>
              <select id="time-select" tabindex="-1">
                <option value="30">30 Seconds</option>
                <option value="60" selected>60 Seconds</option>
                <option value="120">2 Minutes</option>
                <option value="300">5 Minutes</option>
                <option value="custom">Custom</option>
              </select>
            </div>

            <div
              class="setting-group"
              id="custom-time-group"
              style="display: none"
            >
              <label for="custom-time">Custom Time (seconds)</label>
              <input
                type="number"
                id="custom-time"
                min="10"
                max="600"
                value="60"
                tabindex="-1"
              />
            </div>

            <div class="setting-group">
              <label for="difficulty-select">Difficulty</label>
              <select id="difficulty-select" tabindex="-1">
                <option value="easy" selected>Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
              </select>
            </div>

            <div class="setting-group">
              <label for="language-select">Language</label>
              <select id="language-select" tabindex="-1">
                <option value="english" selected>English</option>
                <option value="bangla">Bangla</option>
              </select>
            </div>

            <div class="setting-group">
              <label for="punctuation-toggle">Punctuation & Capitals</label>
              <select id="punctuation-toggle" tabindex="-1">
                <option value="enabled">Enabled</option>
                <option value="disabled" selected>Disabled</option>
              </select>
            </div>
          </div>
        </div>

        <div class="mode-settings" id="survival-settings">
          <div class="settings-grid">
            <div class="setting-group">
              <label for="survival-type">End Condition</label>
              <select id="survival-type" tabindex="-1">
                <option value="mistakes" selected>Max Mistakes</option>
                <option value="time">Time Limit</option>
              </select>
            </div>

            <div class="setting-group" id="max-mistakes-group">
              <label for="max-mistakes">Maximum Mistakes</label>
              <input
                type="number"
                id="max-mistakes"
                min="1"
                max="50"
                value="5"
                tabindex="-1"
              />
            </div>

            <div
              class="setting-group"
              id="survival-time-group"
              style="display: none"
            >
              <label for="survival-time">Time Limit (minutes)</label>
              <input
                type="number"
                id="survival-time"
                min="1"
                max="60"
                value="5"
                tabindex="-1"
              />
            </div>

            <div class="setting-group">
              <label for="survival-difficulty">Difficulty</label>
              <select id="survival-difficulty" tabindex="-1">
                <option value="easy" selected>Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
              </select>
            </div>

            <div class="setting-group">
              <label for="survival-language">Language</label>
              <select id="survival-language" tabindex="-1">
                <option value="english" selected>English</option>
                <option value="bangla">Bangla</option>
              </select>
            </div>
          </div>
        </div>

        <div class="setting-group">
          <button id="apply-settings" tabindex="-1">Apply Settings</button>
        </div>
      </div>

      <div class="test-area">
        <div class="timer" id="timer">60</div>

        <div class="words-container" id="words-container">
          <!-- Words will be generated here -->
        </div>

        <div class="input-area">
          <input
            type="text"
            id="typing-input"
            placeholder="Click here or start typing to begin the test..."
            autocomplete="off"
            tabindex="0"
          />
        </div>
        <button
          id="reset-test"
          class="primary"
          style="margin-top: 1rem; width: auto; padding: 0.5rem 1rem"
          tabindex="-1"
        >
          Reset Test
        </button>
      </div>

      <div class="stats-panel">
        <div class="stats-grid">
          <div class="stat">
            <div class="stat-value" id="wpm">0</div>
            <div class="stat-label">Words Per Minute</div>
          </div>

          <div class="stat">
            <div class="stat-value" id="accuracy">100%</div>
            <div class="stat-label">Accuracy</div>
          </div>

          <div class="stat">
            <div class="stat-value" id="keystrokes">0</div>
            <div class="stat-label">Keystrokes</div>
          </div>

          <div class="stat">
            <div class="stat-value" id="errors">0</div>
            <div class="stat-label">Errors</div>
          </div>
        </div>
      </div>

      <div class="ai-analysis">
        <h3>ðŸ¤– AI Analysis</h3>
        <div class="analysis-content" id="analysis-content">
          Complete a test to get personalized feedback on your typing
          performance.
        </div>

        <div
          class="heatmap-container"
          id="heatmap-container"
          style="display: none"
        >
          <div class="heatmap-title">Key Heatmap</div>
          <div class="heatmap-keys" id="heatmap-keys">
            <!-- Heatmap will be generated here -->
          </div>
        </div>

        <div class="error-breakdown" id="error-breakdown" style="display: none">
          <div class="heatmap-title">Error Breakdown</div>
          <div id="error-list">
            <!-- Error breakdown will be generated here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Name Input Modal -->
    <div class="modal-overlay" id="name-modal">
      <div class="modal">
        <div class="modal-header">
          <h2>Test Complete! ðŸŽ‰</h2>
        </div>
        <div class="modal-body">
          <p>Enter your name to save your results:</p>
          <input
            type="text"
            id="user-name"
            placeholder="Your Name"
            maxlength="40"
            tabindex="-1"
          />
        </div>
        <div class="modal-footer">
          <button id="submit-name" tabindex="-1">Submit Results</button>
        </div>
      </div>
    </div>

    <!-- Results Modal -->
    <div class="modal-overlay" id="results-modal">
      <div class="modal">
        <div class="modal-header">
          <h2>Congratulations, <span id="result-name"></span>! ðŸŽŠ</h2>
          <button class="modal-close" id="close-results" tabindex="-1">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <div class="results-grid">
            <div class="result-item">
              <span class="result-label">WPM Score:</span>
              <span class="result-value" id="result-wpm">0</span>
            </div>
            <div class="result-item">
              <span class="result-label">Raw WPM:</span>
              <span class="result-value" id="result-raw">0</span>
            </div>
            <div class="result-item">
              <span class="result-label">Keystrokes:</span>
              <span class="result-value" id="result-keystrokes">0</span>
            </div>
            <div class="result-item">
              <span class="result-label">Mistakes:</span>
              <span class="result-value" id="result-mistakes">0</span>
            </div>
            <div class="result-item">
              <span class="result-label">Accuracy:</span>
              <span class="result-value" id="result-accuracy">100%</span>
            </div>
            <div class="result-item">
              <span class="result-label">Time:</span>
              <span class="result-value" id="result-time">60s</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="retry-test" tabindex="-1">Try Again</button>
          <button id="share-results" tabindex="-1">Share Results</button>
        </div>
      </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="login-modal">
      <div class="modal">
        <div class="modal-header">
          <h2>Login to TypeMaster</h2>
        </div>
        <div class="modal-body">
          <div class="form-tabs">
            <div class="form-tab active" data-tab="login" tabindex="-1">
              Login
            </div>
            <div class="form-tab" data-tab="register" tabindex="-1">
              Register
            </div>
          </div>

          <div class="auth-form" id="login-form">
            <div class="setting-group">
              <label for="login-email">Email</label>
              <input
                type="email"
                id="login-email"
                placeholder="Your email"
                tabindex="-1"
              />
            </div>
            <div class="setting-group">
              <label for="login-password">Password</label>
              <input
                type="password"
                id="login-password"
                placeholder="Your password"
                tabindex="-1"
              />
            </div>
            <div class="form-error" id="login-error"></div>

            <div class="setting-group">
              <button id="email-login" tabindex="-1" style="width: 100%">
                Login
              </button>
            </div>

            <div style="text-align: center; margin: 1rem 0">OR</div>

            <div class="setting-group">
              <button
                id="google-login"
                class="secondary"
                tabindex="-1"
                style="width: 100%"
              >
                Login with Google
              </button>
            </div>
          </div>

          <div class="auth-form" id="register-form" style="display: none">
            <div class="setting-group">
              <label for="register-name">Name</label>
              <input
                type="text"
                id="register-name"
                placeholder="Your name"
                tabindex="-1"
              />
            </div>
            <div class="setting-group">
              <label for="register-email">Email</label>
              <input
                type="email"
                id="register-email"
                placeholder="Your email"
                tabindex="-1"
              />
            </div>
            <div class="setting-group">
              <label for="register-password">Password</label>
              <input
                type="password"
                id="register-password"
                placeholder="Your password (min. 8 characters)"
                tabindex="-1"
              />
            </div>
            <div class="setting-group">
              <label for="confirm-password">Confirm Password</label>
              <input
                type="password"
                id="confirm-password"
                placeholder="Confirm your password"
                tabindex="-1"
              />
            </div>

            <div class="password-requirements">
              <strong>Password Requirements:</strong>
              <ul>
                <li id="req-length" class="requirement-not-met">
                  At least 8 characters
                </li>
                <li id="req-capital" class="requirement-not-met">
                  At least one capital letter
                </li>
                <li id="req-number" class="requirement-not-met">
                  At least one number
                </li>
                <li id="req-special" class="requirement-not-met">
                  At least one special character
                </li>
                <li id="req-match" class="requirement-not-met">
                  Passwords must match
                </li>
              </ul>
            </div>

            <div class="form-error" id="register-error"></div>

            <div class="setting-group">
              <button id="email-register" tabindex="-1">Register</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="close-login" tabindex="-1">Cancel</button>
        </div>
      </div>
    </div>

    <footer>
      <p>Typing Speed Test &copy; 2025 ||</p>
      <p>Taafeef Bin Montaquim || All Rights Reserved</p>
      <p>
        Also check my other website:
        <br />
        <a
          href="https://weatherify-ai.netlify.app/"
          target="_blank"
          rel="noopener"
          style="user-select: none"
          tabindex="-1"
          >Weatherify AI</a
        >
        ,
        <a
          href="https://taskschedulepro.netlify.app/"
          target="_blank"
          rel="noopener"
          style="user-select: none"
          tabindex="-1"
          >TaskSchedule Pro</a
        >
      </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
